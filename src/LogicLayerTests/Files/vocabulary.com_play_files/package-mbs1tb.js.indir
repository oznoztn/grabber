Module.define("vcom/examplebrowser",["jquery","date","vcom/examplebrowser.css"],function(){var $=jQuery;var domains=[null,"F","A","N","B","S","M","T"];var domainNames=["All Sources","Fiction","Arts / Culture","News","Business","Sports","Science / Med","Technology"];var useJsonp=true;this.construct=function(){$this=$(this);var ret=$this.data("examplebrowser");return ret||(ret=new ExampleBrowser(this))};function ExampleBrowser(element,options){var _this=this;this.clear=clear;this.next=next;this.prev=prev;options=options||{};if(!options.displayWindow){options.displayWindow=3}if(element){element=$(element).empty().addClass("vcom_examples").data("examplebrowser",this);if(element.attr("count")){options.displayWindow=parseInt(element.attr("count"))}if(element.attr("filter")!=null){options.filter=parseInt(element.attr("filter"))}if(element.attr("domains")=="false"){options.hideDomains=true}}this.options=options;var root=$('<div class="exampleBrowser"></div>');this.element=root[0];var resultsContainer=$('<div class="container"></div>').appendTo(root);var resultsList=$('<div class="results"><div class="messages">loading examples...</div></div>').appendTo(resultsContainer);$('<div class="buttons"><a class="prev ss-navigateleft" title="prev">Prev</a><a class="next ss-navigateright right" title="next">Next</a></div>').appendTo(root).find("a.next").on("click",next).end().find("a.prev").on("click",prev).end();if(!options.hideDomains){var domainDiv=$('<div class="domains"></div>');for(var i=0;i<domains.length;i++){var item=$('<a href="javascript:void(0)"></a>').text(domainNames[i]).attr("title",domainNames[i]).attr("data-code",domains[i]).appendTo(domainDiv);if(i==0){item.addClass("selected")}}domainDiv.prependTo(root).find("a").on("click",function(){domainDiv.toggleClass("open");$this=$(this);if(!$this.hasClass("selected")){$this.addClass("selected").siblings().removeClass("selected");var code=$this.data("code");if(code){options.domain=code}else{delete options.domain}if(params){params.startOffset=0;data.reset();refresh()}}})}if(element){$(element).empty().append(root)}var params=null;var searchTerm=null;this.search=function(words,callback){if(words!=searchTerm){searchTerm=words.trim();params={query:words,maxResults:data.displayWindow*6,startOffset:0};data.reset();refresh(callback)}return false};function refresh(callback){if(params.query){params.domain=options.domain;if(options.filter!=undefined){params.filter=options.filter}loading=true;getJSON(params,function(r){loading=false;data.totalResults=r.totalHits;data.sentences.push.apply(data.sentences,r.sentences);renderData(true);if(typeof callback==="function"){callback.call(_this,params)}})}}function clear(){resultsContainer.empty();data.reset();element.trigger("exampleBrowser.clear")}var data={displayPtr:0,displayWindow:options.displayWindow,sentences:[],totalResults:0,renderHTML:renderHTML,hasNext:function(){return this.displayPtr+this.displayWindow<this.totalResults},hasPrev:function(){return this.displayPtr>0},reset:function(){this.displayPtr=0;this.sentences=[];this.totalResults=0}};var loading=false;if(element&&element.attr("word")){this.search(element.attr("word"))}function renderData(fromRight){if(data.sentences.length==0){slide($('<div class="results"><div class="messages">no examples found</div></div>'),fromRight)}else{slide($('<div class="results"></div>').append(template(data)),fromRight)}root.toggleClass("hasPrev",data.hasPrev());root.toggleClass("hasNext",data.hasNext());root.trigger("exampleBrowser.load",params.query)}function slide(offscreen,rtl){var to=(resultsContainer.width()+10);resultsContainer.height(resultsContainer.height());root.addClass("animating");offscreen.css("left",(rtl?to:-to)+"px").appendTo(resultsContainer).animate({left:0},500);resultsContainer.animate({height:offscreen.height()},500);var toRemove=resultsList;resultsList.animate({left:rtl?-to:to},500,function(){toRemove.remove();resultsContainer.css("height","auto");root.removeClass("animating")});resultsList=offscreen}function next(){if(data.hasNext()){if(data.displayPtr+(data.displayWindow*3)>=data.sentences.length){if(!loading){loading=true;params.startOffset=data.sentences.length;getJSON(params,function(r){loading=false;data.totalResults=r.totalHits;data.sentences.push.apply(data.sentences,r.sentences)})}}if(data.displayPtr<data.sentences.length+data.displayWindow){data.displayPtr+=data.displayWindow;renderData(true)}}}function prev(){if(data.hasPrev()){data.displayPtr-=data.displayWindow;renderData(false)}}}function renderHTML(result){var sent=$('<div class="sentence"/>');var str=result.sentence;var offsets=result.offsets;var last=0;for(var i=0;i<offsets.length;i+=2){sent.append(document.createTextNode(str.substring(last,offsets[i])));sent.append($("<strong/>").text(str.substring(offsets[i],offsets[i+1])));last=offsets[i+1]}sent.append(document.createTextNode(str.substring(last)));return $("<li/>").append(sent)}function template(data){var ul=$("<ul/>");for(var s=data.displayPtr;s<Math.min(data.sentences.length,data.displayPtr+data.displayWindow);s++){var result=data.sentences[s];renderHTML(result).append(link(result)).appendTo(ul)}return ul}function link(result){var sourceLink=$('<a target="_blank" class="source"></a>');var $title=$("<span />").appendTo(sourceLink);if(result.volume.corpus.id=="GUT"){sourceLink.attr("href","http://www.gutenberg.org/ebooks/"+result.volume.locator);$title.addClass("author").text(result.volume.author)}else{if(result.volume.corpus.id=="LIT"){$title.addClass("title").text(result.volume.title)}else{$title.addClass("corpus").text(result.volume.corpus.name);if(result.volume.datePublished){$('<span class="date" />').text(Date.fromISO(result.volume.datePublished).format("mediumDate")).appendTo(sourceLink)}}if(result.volume.asin){sourceLink.attr("href","http://www.amazon.com/dp/"+result.volume.asin+"?tag=vocabcom-20")}else{if(result.volume.locator&&result.volume.locator.indexOf("http")==0){sourceLink.attr("href",result.volume.locator)}}}return sourceLink}function getJSON(params,onload){if(!params){params={}}var options={url:"https://corpus.vocabulary.com/api/1.0/examples.json",type:"GET",data:params,dataType:"json",success:function(result){onload(result.result)}};if(useJsonp){options.dataType=options.jsonp="jsonp"}$.ajax(options)}this.ExampleBrowser=ExampleBrowser});Module.define("vcom/facebook",["jquery"],function(){var $=jQuery;var deferred=$.Deferred();if(!$("#fb-root").length){$("body").append('<div id="fb-root"/>')}window.fbAsyncInit=function(){FB.init({appId:"186513741363512",cookie:true,version:"v2.3"});deferred.resolve(FB)};(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/en_US/sdk.js";fjs.parentNode.insertBefore(js,fjs)}(document,"script","facebook-jssdk"));return deferred});Module.define("vcom/listtools",["jquery","dotimeout"],function(){jQuery(function($){var toolsData=$(".page_wordlist .tools[data-wordlist-id]").data();var listId=parseInt(toolsData.wordlistId);$("a[data-action=bookmark]").on("click",function(){var $this=$(this);if(!toolsData.bookmarked){if(window.ga){ga("send","event","tools","addfavorite")}$.post("/lists/addfavorite.json",{wordlistid:listId},function(){toolsData.bookmarked=true;$this.trigger("bookmarkchange")})}else{if(window.ga){ga("send","event","tools","removefavorite")}$.post("/lists/deletefavorite.json",{wordlistid:listId},function(){toolsData.bookmarked=false;$this.trigger("bookmarkchange")})}}).on("bookmarkchange",function(){$(this).toggleClass("bookmarked",!!toolsData.bookmarked).find("span").text(toolsData.bookmarked?"Remove Bookmark":"Bookmark this List")}).trigger("bookmarkchange");$("a[data-action=print]").on("click",function(){if($(".page_wordlist #wordlist").length){window.print()}else{$('<iframe src="/lists/'+listId+'" style="display:none" />').appendTo("body").on("load",function(){var $this=$(this);setTimeout(function(){$this[0].contentWindow.print()},10);setTimeout(function(){$this.remove()},500)})}});$("a[data-action=copy]").on("click",function(){$button=$(this);if($button.hasClass("showing")){return}$button.addClass("showing");if(window.ga){ga("send","event","tools","copylist")}var $panel=$('<div class="vcom_popup copylist"/>').on("click",".option",function(){addTo($(this).data("wl"))}).on("hidden",function(){$button.removeClass("showing")}).hide();$('<a class="option" role="button">New List...</a>').attr("title","Copy to a new vocabulary list").appendTo($panel);doPopup($panel,$button);if(window.loginData&&window.loginData.auth&&window.loginData.auth.uid){$.post("/lists/byprofile.json",{display:"created",orderby:"activitydate",pageSize:11},function(data){if(data.result){var cnt=0;data.result.wordlists.forEach(function(wl){if(++cnt<10&&wl.wordlistid!=listId){$('<a role="button" class="option" />').text(wl.name+" ("+wl.wordcount+")").attr("title",'Add these words to "'+wl.name+'"').data("wl",wl).appendTo($panel)}});$panel.appendTo(document.body).fadeIn()}})}else{$panel.appendTo(document.body).fadeIn()}function hide(){$panel.trigger("hide")}function addTo(wl){hide();$.post("/lists/load.json",{id:listId},function(data){var words=data.result.words.map(function(w){var word={word:w.word};if(w.synsetid){word.synsetid=w.synsetid}if(w.example){word.example=w.example.text}if(w.description){word.description=w.description}return word});if(loginData.validUser){var $form=$('<form method="post" />');$('<input name="wordlist.name" />').val(data.result.name).appendTo($form);$('<input name="wordlist.description" />').val(data.result.description).appendTo($form);$('<input name="wordlist.sourceid" />').val(data.result.wordlistid||"").appendTo($form);$('<input name="addwords" />').val(JSON.stringify(words)).appendTo($form);$form.attr("action",(wl==null)?"/lists/new":"/lists/"+wl.wordlistid+"/edit");$form.appendTo(document.body).submit()}else{var listdata={action:"edit",shared:true,words:words,name:data.result.name,sourceid:data.result.wordlistid,description:data.result.description};sessionStorage.setItem("listmakerdata",JSON.stringify(listdata));document.location.href="/lists/new"}$form.appendTo("body").submit()})}return false}).css("user-select","none");if(!!toolsData.learnable){var wordcount=toolsData.learnable;var unlearnable=toolsData.unlearnable;var progress=parseInt(toolsData.progress);var learning=!!toolsData.learning;var panel=$(".page_wordlist .header .item.listprogress").hide().toggleClass("mastered",progress==100);var button=$('<a href="javascript:void(0);" class="learnthislist" >Add to Learning Program</a>').attr("title","Add all the words on this list to your learning program.").on("click",function(){if(!loginData.validUser){if(confirm("You must be logged in to add this list to your learning program, would you like to log in now?")){VCOM.login()}return}toggleLearning()}).appendTo(panel);var status=$('<div class="status"></div>').appendTo(panel).toggle(learning);status.on("click",".button.stop",function(){toggleLearning()});function toggleLearning(){$.post("/lists/"+listId+"/"+(learning?"stop.json":"start.json"),function(result){var pdata=getProgressData(result);learning=(pdata!=null);progress=pdata==null?0:parseInt(pdata.progress*100);if(learning){updateButton();status.show()}else{status.hide();updateButton()}},"json")}function createProgress(){return}$("body").on("challenge.update",function(e){var lists=e.pdata.lists;if(lists&&lists.length){for(var i=0;i<lists.length;i++){if(lists[i].listId==listId){progress=parseInt(lists[i].progress*100);var $prg=status.find("i.progress").attr("data-prg",progress);$prg.attr("title",progress+"% Mastered").parent().find("label").text(progress<100?" Progress mastering this list":"100% Mastered");panel.toggleClass("mastered",progress==100)}}}});function updateButton(){if(learning){button.hide();status.empty().append($('<h3><i class="progress"/><span/></h3>').find("i").attr("data-prg",progress).attr("title",progress+"% Mastered").end().find("span").text(progress<100?" Progress mastering this list":"100% Mastered").end()).append("<p>You have added "+(unlearnable?"":"all")+" "+wordcount+' words from this list to <a href="/account/progress/words/learning">your learning program.</a>  You are '+progress+'% complete mastering the words on this list. <a href="/play/">'+(progress>0?"Keep":"Start")+" playing now.</a></p>");if(unlearnable){status.append('<p><a href="/lists/'+listId+'/?filter=unlearnable">'+unlearnable+" words were omitted</a> because we don't have questions for them yet.</p>")}panel.toggleClass("mastered",progress==100);status.append('<div class="tools"><a class="button stop" role="button"><i class="ss-delete red"></i>Remove from Learning Program</a></div>');$(".page_wordlist").addClass("learning").trigger("updateProgress");$(".wordlist").addClass("learning")}else{button.show();$(".page_wordlist").removeClass("learning").trigger("updateProgress");$(".wordlist").removeClass("learning")}}function getProgressData(result){if(!result||!result.pdata||!result.pdata.lists||!result.pdata.lists.length){return}var lists=result.pdata.lists;for(var i=0;i<lists.length;i++){if(lists[i].listId==listId){return(lists[i])}}}updateButton();panel.slideDown(function(){$(this).css("overflow","")})}function doPopup($panel,$button,options){var pos=$button.offset();$panel.css("position","absolute").appendTo("body");var height=$panel.outerHeight(),width=$panel.outerWidth();$panel.hide();var reverse=(($button[0].getBoundingClientRect().top+height+30)>$(window).height());options=$.extend({alignX:0,alignY:reverse?0:1,anchorX:0,anchorY:reverse?1:0,offsetX:0,offsetY:reverse?-4:4},options);$panel.on("hide",hide);pos.top+=($button.height()*options.alignY)+(-height*options.anchorY)+options.offsetY;pos.left+=($button.width()*options.alignX)+(-width*options.anchorX)+options.offsetX;$panel.offset(pos);function hideIf(e){if(!$.contains($panel[0],e.target)&&e.target!==$panel[0]){hide()}}function hide(){$panel.off("hide",hide);$("body").off("click",hideIf);$panel.fadeOut(function(){$panel.trigger("hidden").remove()})}$("body").doTimeout("popupclick",1,"on","click",hideIf)}})});Module.define("vcom/pusher",["vcom/socketio"],function(){var $=jQuery;var socket=io(window.socketserver||"https://rt.vocab.com",{transports:["websocket","polling"]});var channels={};socket.on("reconnect",function(){for(var k in channels){socket.emit("join",k)}});var pusher={subscribe:function(channel){var count=channels[channel]=(channels[channel]||0)+1;if(count==1){socket.emit("join",channel)}return pusher},unsubscribe:function(channel){var cnt=channels[channel];if(cnt){channels[channel]--}if(cnt==1){socket.emit("leave",channel);delete channels[channel]}return pusher},bind:function(event,fn){socket.on(event,fn);return pusher},unbind:function(event,fn){socket.off(event,fn);return pusher},socket:socket};window.pusher=pusher;return pusher});Module.define("vcom/qpreview",["jquery","vcom/usermenu","vcom/qpreview.css"],function(module){var $=jQuery;this.construct=function(){$this=$(this);var ret=$this.data("QPreview");return ret||(ret=new QPreview(this))};function QPreview(element){element=$(element).addClass("vcom_qpreview nocontent robots-nocontent").empty().hide();var word=element.attr("word");VCOM.authCache.get().then(function(auth){if(auth.validUser||(window.sessionStorage&&window.sessionStorage.getItem("qpreview")=="1")){element.remove()}else{setTimeout(function(){Module.after("vcom/qpreview.css",load)},4000)}});function load(){$.post("/challenge/preview.json",{word:word},function(content){var nonce="";if(!content.code){element.remove()}else{var $question=$('<div class="vcom-challenge"/>').append(b64(content.code));$question.find(".tools").remove();$question.find(".choices a").one("click",function(){nonce=$(this).attr("nonce");$question.find(".choices a").off("click");if(window.ga&&window.ga.create){ga("send","event","convert","question",{hitCallback:submit})}else{submit()}});if(word==content.word){element.append("<h4>Think you know <strong>"+content.word+"</strong>? Quiz yourself:</h4>")}else{element.append("<h4>Quiz yourself:</h4>")}element.append($question);element.slideDown()}function submit(){if(window.sessionStorage){window.sessionStorage.setItem("qpreview","1")}$('<form method="post" action="/challenge/preview/" ></form>').append($('<input type="hidden" name="secret">').val(content.secret)).append($('<input type="hidden" name="nonce">').val(nonce)).appendTo(element).submit()}})}}function b64(s){var e={},i,b=0,c,x,l=0,a,r="",w=String.fromCharCode,L=s.length;var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0;i<64;i++){e[A.charAt(i)]=i}for(x=0;x<L;x++){c=e[s.charAt(x)];b=(b<<6)+c;l+=6;while(l>=8){((a=(b>>>(l-=8))&255)||(x<(L-2)))&&(r+=w(a))}}return decodeURIComponent(escape(r))}});Module.define("vcom/schoolfinder",["jquery","dotimeout"],function(module){module.SchoolFinder=SchoolFinder;var $=window.jQuery;function SchoolFinder(element,name){var supportedCountries={USA:true,CAN:true};var root=jQuery('<div class="schoolfinder"></div>');var hidden=jQuery('<input type="hidden">').attr("name",name).appendTo(root);var remover=jQuery('<a class="remove"></a>').attr("title","Remove your school").appendTo(root).hide().on("click",function(){clear();input.focus()});var timeout=null;var state=null,country=null,grade=null;var lastPost,hasMore,scrolling=false,lastRequest;var input=jQuery('<input type="text" />').attr("autocorrect","off").attr("autocomplete","false").attr("spellcheck","false").attr("placeholder","Search for your school by name, city or zip code...").appendTo(root).on("blur",function(){input.doTimeout("blur",1,function(){cancel();lastPost=null;if(!sname){var selectedItem=resultsPane.find("li:first-of-type");if(selectedItem.length&&selectedItem.find(".name").text().toLowerCase()==input.val().trim().toLowerCase()){accept(selectedItem)}}if(sname&&sname.toLowerCase()!=input.val().trim().toLowerCase()){clear()}if(!hidden.val().length){clear()}else{remover.show()}});resultsPane.slideUp()}).on("focus",function(){remover.hide()}).on("input",function(e){refresh(250)}).on("keydown",function(e){if(e.keyCode==40){e.preventDefault();downArrow();return false}else{if(e.keyCode==38){e.preventDefault();upArrow();return false}else{if(e.keyCode==13){e.preventDefault();accept();return false}}}});var resultsPane=jQuery('<div class="resultsPane"><div>').appendTo(root).on("mousedown","li",function(evt){jQuery(this).addClass("selected").siblings("selected").removeClass("selected");accept(jQuery(this));return false}).on("mouseenter","li",function(e){jQuery(this).addClass("selected").siblings("selected").removeClass("selected")}).on("mouseleave","li",function(e){jQuery(this).removeClass("selected")}).hide();function downArrow(){var selectedItem=resultsPane.find("li.selected");if(!selectedItem.length){scrollItemIntoView(resultsPane.find("li").first().addClass("selected"))}else{var next=selectedItem.next("li");if(next.length){selectedItem.removeClass("selected");scrollItemIntoView(next.addClass("selected"))}else{fetchMore(function(){scrollItemIntoView(resultsPane.find("li.selected").removeClass("selected").next("li").addClass("selected"))})}}}function upArrow(){var selectedItem=resultsPane.find("li.selected");if(selectedItem.length){scrollItemIntoView(selectedItem.removeClass("selected").prev("li").addClass("selected"))}}function clear(){root.trigger({type:"schoolselect",id:null,name:null})}this.clear=clear;function accept(selectedItem){if(!selectedItem){selectedItem=resultsPane.find("li.selected")}if(selectedItem&&selectedItem.length){root.trigger({type:"schoolselect",id:selectedItem.attr("id"),name:selectedItem.find(".name").text(),city:selectedItem.find(".city").text(),state:selectedItem.data("state"),country:selectedItem.data("country")})}resultsPane.slideUp()}element=jQuery(element).empty().append(root);hidden.val(element.attr("schoolid"));var sname=element.attr("title");if(sname&&sname.length){input.val(sname);remover.show();root.addClass("found")}element.attr("title","").attr("schoolid","");function scrollItemIntoView(selectedItem){if(!selectedItem||!selectedItem.length){return}var top=resultsPane.offset().top;var bottom=top+resultsPane.outerHeight();var divtop=selectedItem.offset().top;var divbottom=divtop+selectedItem.outerHeight();if(divtop<top){resultsPane.scrollTop(resultsPane.scrollTop()+(divtop-top))}else{if(divbottom>bottom){resultsPane.scrollTop(resultsPane.scrollTop()+(divbottom-bottom))}}}root.on("schoolselect",function(evt){if(!evt.name){root.removeClass("found");input.val("");remover.hide();hidden.val("");sname=null}else{sname=evt.name;input.val(evt.name);root.addClass("found");remover.show();hidden.val(evt.id)}});this.setState=function(st){if(st!=null){if(st.length>0){st=st.trim()}if(st.length==0){st=null}}if(st!=state){state=st;refresh()}};this.setCountry=function(cn){if(cn!=null){if(cn.length>0){cn=cn.trim()}if(cn.length==0){cn=null}}if(cn!=country){country=cn;state=null;if(supportedCountries[country]){refresh()}else{clear()}}};this.countrySupported=function(cn){return(!!supportedCountries[country])};this.setGrade=function(gr){if(gr!=grade){grade=gr;refresh()}};this.show=function(){$(element).closest("form").addClass("schoolfinder-enabled")};function refresh(delay){if(timeout!=null){window.clearTimeout(timeout);timeout=null}var p={search:input.val().trim(),state:state,country:country,grade:grade};if(delay){timeout=window.setTimeout(function(){update(p)},delay)}else{update(p)}}resultsPane.hide();function update(params){if(!equal(params,lastPost)){lastPost=copyParams(params);cancel();if(!params.search||params.search.length==0){resultsPane.empty();if(resultsPane.is(":visible")){resultsPane.slideUp()}hasMore=false;lastCount=0;resultsPane.scrollTop(0)}else{lastRequest=$.ajax({type:"POST",url:"/ui/findschool",data:params,success:function(data){resultsPane.html(data).scrollTop(0);hasMore=true;var items=resultsPane.find("li");lastCount=items.length;if(lastCount){items.first().addClass("selected")}else{resultsPane.html('<div class="noresults">No schools were found that match your search.  Try searching by postal code or city.</div>')}if(input.is(":focus")&&!resultsPane.is(":visible")){resultsPane.slideDown(400,function(){resultsPane.css("overflow","auto")})}}})}}}function cancel(){scrolling=false;if(timeout!=null){window.clearTimeout(timeout)}timeout=null;if(lastRequest!=null){lastRequest.abort();lastRequest=null}}resultsPane.on("scroll",function(){if(hasMore&&this.scrollTop+this.clientHeight+200>this.scrollHeight&&!scrolling){fetchMore()}});function fetchMore(callback){if(hasMore){cancel();var params=copyParams(lastPost);if(!params.skip){params.skip=0}params.skip+=10;lastPost=params;scrolling=true;lastRequest=$.ajax({url:"/ui/findschool",type:"POST",data:params,success:function(data){scrolling=false;resultsPane.find("ul").append($(data).find("li"));var cnt=resultsPane.find("li").length;hasMore=(cnt>lastCount);lastCount=cnt;if(callback){callback()}}})}}function copyParams(params){var ret={};for(var p in params){ret[p]=params[p]}return ret}function equal(p1,p2){if((p1&&!p2)||(p2&&!p1)){return false}for(var p in p1){if(p1[p]!=p2[p]){return false}}for(var p in p2){if(p1[p]!=p2[p]){return false}}return true}}jQuery("head").append("<style>		.schoolfinder .resultsPane {			overflow: auto;			width: 100%;			height: 149px;			font-size: 12px;		   -webkit-overflow-scrolling: touch;		   	position: absolute;			z-index: 1000; background-color: white; border: 1px solid #ccc;			box-shadow: 1px 1px 5px rgba(0,0,0,0.3);		}		.schoolfinder .resultsPane ul {			margin: 0;			padding: 0;			list-style: none;			background-color: white;		}		.schoolfinder .resultsPane li {			margin: 0;			border-bottom: 1px solid #ccc;			padding: 5px 10px 5px 20px;			cursor: pointer;		}		.schoolfinder .resultsPane li.selected {			background-color: #eee;		}		.schoolfinder {			position: relative;		}		.schoolfinder input[type=text] {		    padding-left: 24px;			margin: 0;			width: 100%;			background-image: url('/images/icons/search.gif');			background-repeat: no-repeat;			background-position: 6px 50%;		}  .schoolfinder .resultsPane .noresults { text-align: center; padding: 35px 20px 0 20px; font-size: 16px; font-weight: 300; line-height: 175%; font-style: italic; color: #666; }  .schoolfinder a.remove { display: block; cursor: pointer; position: absolute; left: 7px; margin-top: -7px; top: 50%; width: 14px; height: 14px; background-repeat: no-repeat; background-image: url('/images/icons/x-circle.png') }  .schoolfinder .resultsPane .address { display: block; font-size: 11px; color: #999; } </style>")});Module.define("vcom/slots",["jquery","vcom/usermenu","dotimeout"],function(){var $=jQuery;var account="15665503",servicesEnabled=false,slots={},sizeBreaks=[],lastBreak=null,minRefresh=10000;if(!window.googletag){window.googletag={}}window.googletag.cmd=window.googletag.cmd||[];if(!modules.cookie.get("guid")){init()}else{VCOM.authCache.get().then(function(auth){if(auth.perms&&auth.perms.adfree){return}init()})}function init(){(function(){var gads=document.createElement("script");gads.async=true;gads.type="text/javascript";gads.src=(("https:"==document.location.protocol)?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var node=document.getElementsByTagName("script")[0];node.parentNode.insertBefore(gads,node)})();googletag.cmd.push(function(){var pubads=googletag.pubads();pubads.enableSingleRequest();pubads.disableInitialLoad();defineSlots();googletag.enableServices();for(var id in slots){googletag.display(id)}servicesEnabled=true;pubads.addEventListener("slotRenderEnded",function(event){$("#"+event.slot.getSlotElementId()).trigger("resize")})});jQuery(function($){$("body").addClass("with-banner-ad").prepend('<div class="leaderboard-ad"><div class="adslot" data-collapse="true" data-adunit="Dictionary-Top-Banner" 					data-responsive="true" data-dimensions="[[320,50],[468,60],[728,90],[970, 90]]" id="top-banner-ad"></div></div>');var answered=0;$("body").on("refreshads",refreshSoon).on("challenge.nextQuestion",function(){if(answered++){refreshSoon(250)}}).on("vcom.dictpageload",function(){refreshSoon(20)}).on("challenge.resume",function(){googletag.cmd.push(function(){defineSlots();refreshWith(".vcom-challenge .adslot:visible")})});$(window).on("resize orientationchange",function(e){$.doTimeout("refreshads-size",100,function(){if(breakIndex(window.innerWidth)!=lastBreak){refreshNow(true)}})});refreshNow()})}function defineSlots(){var units=$(".adslot[data-adunit]");for(var i=0;i<units.length;i++){var $this=$(units[i]);var id=$this.attr("id");if(!slots[id]){var dimensions=$this.data("dimensions");if(typeof dimensions=="string"){dimensions=$.parseJSON(dimensions)}var mapping=null;if($this.data("sizeMapping")){var allSizes=[];mapping=googletag.sizeMapping();$this.data("sizeMapping").forEach(function(m){m[1].forEach(function(s){allSizes.push(s),mapping.addSize(m[0],s)})});if(!dimensions){dimensions=distinctDimensions(allSizes)}}else{if($this.data("responsive")){var widths=[];maxh=0;dimensions.forEach(function(dim){widths[dim[0]]=true;maxh=Math.max(maxh,dim[1])});mapping=googletag.sizeMapping();dimensions.forEach(function(dim){for(var w in widths){w=parseInt(w);if(w<=dim[0]){mapping.addSize([w,maxh],dim)}}})}}slots[id]=googletag.defineSlot("/"+account+"/"+$this.data("adunit"),dimensions,id);if(mapping){mapping=mapping.build();mapping.forEach(function(m){if(sizeBreaks.indexOf(m[0][0])==-1){sizeBreaks.push(m[0][0])}});slots[id].defineSizeMapping(mapping);distinct(sizeBreaks)}if($this.data("collapse")){slots[id].setCollapseEmptyDiv(true,false)}slots[id].addService(googletag.pubads());if(servicesEnabled){googletag.display(id)}}}}function distinctDimensions(dims){return JSON.parse("["+distinct(dims.map(function(d){return JSON.stringify(d)})).join(",")+"]")}function refreshBreaks(){distinct(sizeBreaks)}function distinct(a){return a.sort().filter(function(item,pos,ary){return !pos||item!=ary[pos-1]})}function refreshSoon(time,force){$.doTimeout("refreshads",time|1500,refreshNow,force)}function refreshNow(force){googletag.cmd.push(function(){defineSlots();if(refreshWith(".adslot",force)){$(window).on("scroll orientationchange",refreshDeferred)}})}function refreshDeferred(){$.doTimeout("refreshads-deferred",50,function(){if(!refreshWith(".adslot.deferred-load:visible")){$(window).off("scroll orientationchange",refreshDeferred)}})}function refreshWith(selection,force){var now=Date.now();var toRefresh=[];var deferred=0;var count=$(selection).each(function(){var $this=$(this);var lazy=$this.data("lazy");if(inviewport(this)&&!lazy){var towait=now-($this.data("refreshedOn")||0);if(towait>=minRefresh||force){$this.removeClass("deferred-load").data("refreshedOn",now).doTimeout("refreshads-wait");var slot=slots[$this.attr("id")];if(slot){toRefresh.push(slot)}}else{$this.doTimeout("refreshads-wait",minRefresh-towait,refreshWith,this)}}else{if(lazy){$this.data("lazy",false)}$this.addClass("deferred-load");deferred++}}).length;if(toRefresh.length){googletag.pubads().refresh(toRefresh)}lastBreak=breakIndex(window.innerWidth);return deferred}function breakIndex(width){for(var i=sizeBreaks.length-1;i>=0;i--){if(sizeBreaks[i]<=width){return i}}return 0}function inviewport(el){var bounds=el.getBoundingClientRect();return bounds.top<window.innerHeight&&bounds.bottom>0}});Module.define("vcom/tools",["jquery","dotimeout"],function(module){var $=jQuery;var loginData=window.loginData||{};VCOM.authCache.get().then(function(auth){loginData=auth});this.share=function(){var $this=$(this).empty().addClass("vcom_share");var $button=$('<a class="button share" title="Share this" href="javascript:void(0)"><i class="ss-link icon"></i> <span>Share It</span></a>').on("click",function(){if($button.hasClass("showing")){return}else{show()}}).appendTo($this);if($this.attr("itemtype")){$button.attr("title","Share this "+$this.attr("itemtype"))}if($this.attr("label")){$button.find("span").text($this.attr("label"))}function show(){$button.addClass("showing");var $panel=$('<div class="vcom_popup share"><a data-action="facebook" class="ss-facebook">Facebook</a><a data-action="twitter" class="ss-twitter">Twitter</a><a data-action="google+" class="ss-googleplus">Google+</a><a data-action="linkedin" class="ss-linkedin">LinkedIn</a><a data-action="reddit" class="ss-reddit">Reddit</a><a data-action="tumblr"  class="ss-tumblr">Tumblr</a><a data-action="mail" class="ss-mail">Email</a></div>').on("hidden",function(){$button.removeClass("showing")});$panel.find("a").attr("href","javascript:void(0)").addClass("ss-social-circle").on("click",function(){var action=$(this).data("action");var data=shareData($this,action);switch(action){case"facebook":window.open("https://www.facebook.com/sharer/sharer.php?u="+escape(data.url)+"&name="+escape(data.title)+"&description="+escape(data.description),"share","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=360,width=700").focus();break;case"twitter":window.open("https://twitter.com/home?status="+data.tweet,"share","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=360,width=700").focus();break;case"google+":window.open("https://plus.google.com/share?url="+escape(data.url),"share","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600").focus();break;case"reddit":window.open("http://www.reddit.com/submit?url="+escape(data.url),"share","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=610,width=860").focus();break;case"tumblr":window.open("http://www.tumblr.com/share/link?url="+escape(data.url)+"&name="+escape(data.title)+"&description="+escape(data.description),"share","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=550").focus();break;case"linkedin":window.open("https://www.linkedin.com/shareArticle?mini=true&url="+escape(data.url)+"&title="+escape(data.title)+"&summary="+escape(data.description),"share","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=550").focus();break;case"mail":window.open("mailto:?subject="+encodeURIComponent(data.title)+"&body="+encodeURIComponent(data.mailBody),"share","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=600").focus();break;default:break}if(window.ga){ga("send","event","tools","share",action)}});doPopup($panel,$button);$panel.fadeIn()}};this.addToList=function(){var $root=$(this).empty().addClass("vcom_addtolist").css("user-select","none");var button=$('<a class="button addtolist" title="Add to Vocabulary List"><i class="ss-list icon"></i><span>Add to List...</span></a>').on("click",show).appendTo($root);function show(){var wordData={word:$root.attr("word"),lang:$root.attr("lang")||"en"};if(!loginData.validUser){if(window.ga){ga("send","event","tools","addtolist","login")}if(confirm("You must be logged in to create lists. Would you like to log in now?")){VCOM.login()}return}if(window.ga){ga("send","event","tools","addtolist","validuser")}if(button.hasClass("showing")){return}button.addClass("showing");var $panel=$('<div class="vcom_popup addlist"/>').on("click",".option",function(){addTo($(this).data("wl"))}).on("hidden",function(){button.removeClass("showing")}).hide();$('<a class="option" role="button">New List...</a>').attr("title",'Add "'+wordData.word+'" to a new vocabulary list').appendTo($panel);$.post("/lists/byprofile.json",{uid:loginData.uid,orderby:"activitydate",pageSize:500},function(data){if(data.result){var cnt=0;data.result.wordlists.forEach(function(wl){if(wl.owner&&++cnt<10){$('<a role="button" class="option" />').text(wl.name+" ("+wl.wordcount+")").attr("title",'Add "'+wordData.word+'" to "'+wl.name+'"').data("wl",wl).appendTo($panel)}});doPopup($panel,button);$panel.appendTo(document.body).fadeIn()}});function hide(){$panel.trigger("hide")}function addTo(wl){if(wl){$.post("/lists/save.json",{addwords:JSON.stringify([wordData]),id:wl.wordlistid},function(){$('<div class="confirm">Added <strong></strong> to list <a></a></div>').append($("<img/>").attr("src",Module.getResource("/images/icons/close.gif")).on("click",hide)).find("strong").text(wordData.word).end().find("a").attr("href","/lists/"+wl.wordlistid).text(wl.name).end().appendTo($panel.empty())})}else{hide();$('<form method="post"><input type="hidden" name="addwords"/></form>').find("input").val(JSON.stringify([wordData])).end().attr("action",(wl==null)?"/lists/new":"/lists/"+wl.wordlistid+"/edit").appendTo(document.body).submit()}}}};function doPopup($panel,$button,options){var pos=$button.offset();$panel.css("position","absolute").appendTo("body").on("hide",hide);var height=$panel.outerHeight(),width=$panel.outerWidth();var reverse=(($button[0].getBoundingClientRect().top+height+30)>$(window).height());options=$.extend({alignX:0,alignY:reverse?0:1,anchorX:0,anchorY:reverse?1:0,offsetX:0,offsetY:reverse?-4:4},options);pos.top+=($button.height()*options.alignY)+(-height*options.anchorY)+options.offsetY;pos.left+=($button.width()*options.alignX)+(-width*options.anchorX)+options.offsetX;$panel.show().offset(pos);var dims=$panel[0].getBoundingClientRect();if(dims.right+20>$(window).width()){pos.left-=(dims.right+20)-$(window).width();$panel.offset(pos)}$panel.hide();function hideIf(e){if(!$.contains($panel[0],e.target)&&e.target!==$panel[0]){hide()}}function hide(){$panel.off("hide",hide);$("body").off("click",hideIf);$panel.fadeOut(function(){$panel.trigger("hidden").remove()})}$("body").doTimeout("popupclick",1,"on","click",hideIf)}function shareData(element){var wordPage=element.closest(".wordPage");if(wordPage.length){var data=$.extend({},wordPage.data());data.lang=data.lang||"en";data.description=wordPage.find(".blurb p.short").text().trim();if(data.description.length==0){var def=$("<div/>").html(wordPage.find("h3.definition").first().html());def.find("a").remove();data.description=def.text().trim()}var suffix=((data.lang=="en")?"":data.lang+"/")+escape(data.word).replace(/ /g,"+");data.url="http://vocabulary.com/dictionary/"+suffix;data.title=data.word+" - Definition from Vocabulary.com";data.shortUrl="http://vocab.com/d/"+suffix;data.tweet=escape(data.word+" - "+data.shortUrl);data.mailBody=data.word+" : "+data.shortUrl+"\n\n"+data.description+"\n\nFinally, a dictionary with a soul: http://vocab.com/d/";return data}else{var data={};data.url=trimOrNull($('link[rel="canonical"]').attr("href"))||trimOrNull(data.url=$('meta[property="og:url"]').attr("content"))||document.location.href;data.shortUrl=trimOrNull($('link[rel="shorturl"]').attr("href"))||(data.url.indexOf("https://www.vocabulary.com/")==0)?"https://vocab.com/"+data.url.substring(26):data.url;data.title=trimOrNull($('meta[property="og:title"]').attr("content"))||trimOrNull($("head > title").text());data.description=trimOrNull($('meta[property="og:description"]').attr("content"))||trimOrNull($('meta[name="description"]').attr("content"));data.tweet=trimOrNull($('meta[property="share:tweet"]').attr("content"))||(data.title+" - "+data.shortUrl);data.mailBody=trimOrNull($('meta[property="share:mailbody"]').attr("content"))||("Here's a "+element.attr("itemtype")+" I saw on Vocabulary.com:\n\n"+data.title+"\n\n"+data.description+"\n\nRead more at: \n"+data.url);return data}}function trimOrNull(str){if(str&&str.length){str=str.trim()}return(str&&str.length)?str:null}});Module.define("vcom/wordfamily",["jquery"],function(){var $=jQuery;var hasCanvas=!!document.createElement("canvas").getContext;this.construct=function(){$this=$(this);var ret=$this.data("wordfamily");if(!ret){ret=$this.data("wordfamily",ret=new WordFamilyDisplay(this))}return ret};this.WordFamilyDisplay=WordFamilyDisplay;function WordFamilyDisplay(element){element=$(element).addClass("vcom_wordfamily resizable").empty().on("resized",resized);var familyData=eval("("+element.attr("data")+")");var root=$("<ul/>").appendTo(element);var totalWidth=element.innerWidth()-2;var hoveredData=null;var tooltip=$('<div class="tooltip"><p></p><span class="nub"></span></div>').hide().appendTo(element);element.removeAttr("data").on("mouseenter",".bar",function(){hoveredData=$(this).data();hover.call(this,hoveredData.word,hoveredData,hoveredData.ffreq)}).on("mouseleave",".bar",function(){clearhover()}).on("click",".bar",function(){select($(this).data().word)}).on("click",".tooltip",function(){select(hoveredData.word)});renderFamily();function select(word){var data=null;for(var i=0;i<familyData.length;i++){if(familyData[i].word===word){data=familyData[i];break}}if(data){var rw=data;while(!rw.hw&&rw.parentWord!=null){rw=rw.parentWord}document.location.href=(data===rw)?"/dictionary/"+escape(data.word):"/dictionary/"+escape(rw.word)+"?family="+data.word}}function resized(){root.hide();var w=element.innerWidth();if(totalWidth!=w){totalWidth=w;root.show();renderFamily()}else{root.show()}}function renderFamily(){var currentWord=element.attr("word");var data=familyData;if(!data||!data.length){return}for(var i=0;i<data.length;i++){data[i].selected=(data[i].word==currentWord);data[i].inPath=false}root.empty();var wordsByWord={};var rootWord=null;var selectedWord=null;for(var i=0;i<data.length;i++){wordsByWord[data[i].word]=data[i];data[i].children=[];if(data[i].selected){selectedWord=data[i]}}for(var i=0;i<data.length;i++){var pw=data[i].parent;if(pw){var p=wordsByWord[pw];data[i].parentWord=p;p.children.push(data[i])}else{rootWord=data[i]}}var depth=0;for(var x=selectedWord;x!=null;x=x.parentWord){depth++;x.inPath=true}for(var x=selectedWord,i=depth;x!=null;x=x.parentWord,i--){x.depth=i}renderRecursive(selectedWord,depth);$(".bar span").each(function(){var e=$(this);var w=e.outerWidth();if(w+4>e.parent().innerWidth()){e.hide()}else{e.show().css("margin-left",(-w/2)+"px")}})}function renderRecursive(data,level){var rootContainer=$("<li/>").data(data).appendTo(root);var scale=computeScale(data,totalWidth,totalWidth);var row=$('<div class="row"></div>').appendTo(rootContainer);var ret=renderAll(data,row,scale,level);var ctx=null;if(data.parentWord){var parent=renderRecursive(data.parentWord,level-1);var canvas=$("<canvas/>").attr("width",totalWidth).attr("height",20).appendTo(rootContainer)[0];if(canvas.getContext){var ctx=canvas.getContext("2d");ctx.fillStyle="#ececec";ctx.beginPath();ctx.moveTo(0,0);ctx.lineTo(canvas.width,0);ctx.bezierCurveTo(canvas.width,canvas.height,parent.offsetLeft+parent.clientWidth,0,parent.offsetLeft+parent.clientWidth,canvas.height);ctx.lineTo(parent.offsetLeft,canvas.height);ctx.bezierCurveTo(parent.offsetLeft,0,0,canvas.height,0,0);ctx.closePath();ctx.fill()}}else{var canvas=$("<canvas/>").attr("width",totalWidth).attr("height",20).appendTo(rootContainer)[0];if(canvas.getContext){var ctx=canvas.getContext("2d");ctx.fillStyle="#ececec";ctx.fillRect(0,0,canvas.width,canvas.height)}$('<li><div class="row"></div></li>').appendTo(root).find(".row").append($('<a class="bar"/>').css("width","100%").data(data).append($("<span/>").text('the "'+data.word+'" family')))}return ret}function computeScale(data,width,target){var cnt=data.children.length;var scale=width/data.ffreq;var tw=Math.round(data.freq*scale);for(var i=0;i<data.children.length;i++){tw+=Math.max(2,Math.round(scale*data.children[i].ffreq))}if(tw>target){return computeScale(data,width-(tw-width))}return scale}function renderAll(data,container,scale,depth){var ret=render(data,data.word,data.freq,container,scale,depth);for(var i=0;i<data.children.length;i++){if(data.children[i].type==1){ret=render(data.children[i],data.children[i].word,data.children[i].ffreq,container,scale,depth)||ret}}for(var i=0;i<data.children.length;i++){if(data.children[i].type>1){ret=render(data.children[i],data.children[i].word,data.children[i].ffreq,container,scale,depth)||ret}}return ret}function render(data,word,freq,container,scale,depth){var h=Math.max(2,Math.round(scale*freq));if(freq==0&&data.depth==depth){h=totalWidth}var bar=$("<a/>").addClass("bar type"+data.type).data(data).width(h).append($("<span/>").text(word)).appendTo(container);if(data.hw){bar.addClass("hw")}if(data.selected||(data.inPath&&(data.depth==depth+1))){bar.addClass("selected");if(data.selected&&(data.depth==depth)){bar.addClass("current")}return bar[0]}}function clearhover(){tooltip.hide()}function hover(word,data,freq){var hovertext=null;if(freq){var ppo=formatNumber(1+parseInt(""+(1/(freq/4000))));if(freq==data.freq){hovertext="You'll encounter the word <strong>"+word+"</strong> about once every "+ppo+" pages ."}else{hovertext="You'll encounter some form of the word <strong>"+word+"</strong> about once every "+ppo+" pages."}}else{hovertext="<strong>"+word+"<strong> is extremely rare."}tooltip.find("p").html(hovertext);var midx=this.offsetLeft+(this.clientWidth/2);var maxx=(this.offsetParent.clientWidth-tooltip.width())+10;var left=Math.min(Math.max(-10,midx-(tooltip.width()/2)),maxx);var nub=tooltip.find(".nub");nub.css("left",(midx-left-(nub.width()/2))+"px");tooltip.css({left:left+"px",bottom:((this.offsetParent.clientHeight-this.offsetTop)+10)+"px"}).show()}function formatNumber(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}});